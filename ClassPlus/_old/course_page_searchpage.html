<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClassPlus - Course Search</title>
    <style>
        /* Adding some styles to remove the default blue color and underline of the anchor tag */
        a {
            color: inherit;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline; /* Optional: underline on hover for better user experience */
        }
    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js" 
        integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg==" crossorigin="anonymous"></script>
</head>

<body>
    <nav>
        <div style="width: 100%; height: 100%; position: relative; background: white">
            <div style="width: 1440px; height: 87px; left: 0px; top: 0px; position: absolute; background: #004F34; justify-content: flex-start; align-items: flex-start; display: inline-flex">
                <div style="width: 1430px; height: 87px; padding-left: 16px; padding-right: 16px; padding-top: 8px; padding-bottom: 8px; background: #004F34; justify-content: space-between; align-items: center; display: flex">
                    <div style="width: 70px; height: 71px; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border-radius: 100px; flex-direction: column; justify-content: center; align-items: center; display: inline-flex">
                        <a href="index.html"><img style="width: 70px; height: 71px" src="C_logo.png" /></a>
                    </div>
                    <div style="justify-content: flex-start; align-items: center; gap: 8px; display: flex">
                        <a href="course_page_searchpage.html">
                            <div style="padding-left: 16px; padding-right: 16px; padding-top: 6px; padding-bottom: 6px; color: #F8F9FA; font-size: 16px; font-family: Inter; font-weight: 400; line-height: 28px; word-wrap: break-word">
                                My Courses
                            </div>
                        </a>
                        <a href="study_group_current.html">
                            <div style="padding-left: 16px; padding-right: 16px; padding-top: 6px; padding-bottom: 6px; color: #F8F9FA; font-size: 16px; font-family: Inter; font-weight: 400; line-height: 28px; word-wrap: break-word">
                                My Groups
                            </div>
                        </a>
                        <a href="study_group_find.html">
                            <div style="padding-left: 16px; padding-right: 16px; padding-top: 6px; padding-bottom: 6px; color: #CED4DA; font-size: 16px; font-family: Inter; font-weight: 400; line-height: 28px; word-wrap: break-word">
                                Find group
                            </div>
                        </a>
                        <a href="study_group_creating.html">
                            <div style="padding-left: 16px; padding-right: 16px; padding-top: 6px; padding-bottom: 6px; color: #CED4DA; font-size: 16px; font-family: Inter; font-weight: 400; line-height: 28px; word-wrap: break-word">
                                Create Group
                            </div>
                        </a>
                        <a href="profile.html">
                            <div style="padding-left: 16px; padding-right: 16px; padding-top: 6px; padding-bottom: 6px; color: #D9E4E1; font-size: 16px; font-family: Inter; font-weight: 400; line-height: 28px; word-wrap: break-word">
                                Profile
                            </div>
                        </a>
                        <a id="linkforloginout" href="">
                            <div id="loginout" style="padding-left: 16px; padding-right: 16px; padding-top: 6px; padding-bottom: 6px; color: #D9E4E1; font-size: 16px; font-family: Inter; font-weight: 400; line-height: 28px; word-wrap: break-word">
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        </nav>


    <div style="width: 1010px; height: 397px; left: 235px; top: 288px; position: absolute">
        <div style="width: 362.72px; height: 66.77px; padding-left: 16px; padding-right: 16px; padding-top: 8px; padding-bottom: 8px; left: 50px; top: 0px; position: absolute; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: inline-flex">
            <div style="width: 106px; height: 12px; color: #ABB5BE; font-size: 20px; font-family: Inter; font-weight: 600; text-transform: uppercase; line-height: 16px; letter-spacing: 0.96px; word-wrap: break-word">
            subject
            </div>
        </div>
        <div style="width: 362.72px; height: 75.79px; padding-left: 16px; padding-right: 16px; padding-top: 8px; padding-bottom: 8px; left: 50px; top: 75.79px; position: absolute; background: white; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex">
            <select id="subjectSelect" onchange="handleSelectChange(this)">
            </select>
        </div>


        <div style="width: 433.60px; height: 66.77px; padding-left: 16px; padding-right: 16px; padding-top: 8px; padding-bottom: 8px; left: 270px; top: 0px; position: absolute; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: inline-flex">
            <div style="width: 106px; height: 12px; color: #ABB5BE; font-size: 20px; font-family: Inter; font-weight: 600; text-transform: uppercase; line-height: 16px; letter-spacing: 0.96px; word-wrap: break-word">
            Class
            <br/><br/> 
            </div>
        </div>
        <div style="width: 433.60px; height: 75.79px; padding-left: 16px; padding-right: 16px; padding-top: 8px; padding-bottom: 8px; left: 270px; top: 75.79px; position: absolute; background: white; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: inline-flex">
            <select id="classSelect" style="width: 520px">
                <option></option>
            </select>
        </div>
    </div>
    
    <div style="left: 1100px; top: 360px; position: absolute; justify-content: flex-start; align-items: flex-start; display: inline-flex">
        <button onclick="gotoCoursePage()" style="padding-left: 16px; padding-right: 16px; padding-top: 10px; padding-bottom: 10px; background: #004F34; border-radius: 4px; justify-content: flex-start; align-items: center; display: flex">
            <div style="text-align: center; color: #F5F5F5; font-size: 16px; font-family: Inter; font-weight: 600; word-wrap: break-word">
                Go
            </div>
        </button>
    </div>

    <div style="height: 112px; padding-left: 160px; padding-right: 160px; padding-top: 32px; padding-bottom: 32px; left: -5px; top: 87px; position: absolute; background: rgba(255, 255, 255, 0); border-bottom: 1px #DEE2E6 dotted; flex-direction: column; justify-content: center; align-items: flex-start; display: inline-flex">
        <div style="flex-direction: column; justify-content: flex-start; align-items: center; display: flex">
            <div style="color: #343A40; font-size: 40px; font-family: Inter; font-weight: 700; word-wrap: break-word">Course Search</div>
        </div>
    </div>
    <div style="left: 15px; top: 124px; position: absolute; justify-content: flex-start; align-items: flex-start; display: inline-flex">
        <a href="javascript:void(0);" onclick="window.history.back();" style="text-decoration: none;">
            <div style="padding-left: 16px; padding-right: 16px; padding-top: 10px; padding-bottom: 10px; background: #004F34; border-radius: 4px; justify-content: flex-start; align-items: center; display: flex">
                <div style="text-align: center; color: #F5F5F5; font-size: 16px; font-family: Inter; font-weight: 600; word-wrap: break-word">Back</div>
            </div>
        </a>
    </div>
    
</div>

    
    <script>
        function gotoCoursePage(){
            const subject = document.getElementById('subjectSelect').value;
            const courseNumber = document.getElementById('classSelect').value;

            if(courseNumber == ""){
                alert("Please select class.");
                document.getElementById('classSelect').focus();
                return false;
            }

            const url = `course_page_homepage.html?subject=${subject}&courseNumber=${courseNumber}`;
            window.location.href = url;
        }

        function handleSelectChange(selectElement) {
            const selectedValue = selectElement.value;
            const classes = document.getElementById('classSelect');
            for (let i = classes.options.length - 1; i >= 0; i--) {
                classes.remove(i);
            }

            axios.get(`/api/getClasses/${selectedValue}`)
            .then(res => {
                for(var i=0; i < res.data.length; i++){
                    var option = document.createElement('option');
                    option.setAttribute('value', res.data[i].courseNumber);
                    option.innerHTML = res.data[i].courseNumber + " " + res.data[i].title;
                    document.querySelector('#classSelect').appendChild(option);
                }
            });
        }

        function onLoad() {
            const userId = localStorage.getItem('userId');
            const linkElement = document.getElementById('linkforloginout');
            
            if(!userId || userId === undefined){
                document.querySelector('#loginout').innerHTML = "Login";
                linkElement.href = 'login.html';
                location.replace('login.html');
            }else{
                document.querySelector('#loginout').innerHTML = "Log out";
                linkElement.href = '#';
                linkElement.onclick = function() {
                    localStorage.removeItem('userId');
                    location.replace('index.html');
                };
            }

            axios.get(`/api/getCourseSubject`)
            .then(res => {
                for(var i=0; i < res.data.length; i++){
                    var option = document.createElement('option');
                    option.setAttribute('value', res.data[i].subject);
                    option.innerHTML = res.data[i].subject;
                    document.querySelector('#subjectSelect').appendChild(option);
                }
            });     
        }

        onLoad();
    </script>
</body>
</html>